# Spring Framework Core

* Что такое **Spring Framework**?

**Spring Framework** - фреймворк для построения low-coupling (слабо связанных) приложений. Представляет собой контейнер
для внедрения зависимостей.

* Что такое **Inversion of Control**?

**IoC - Inversion of Control - Инверсия Зависимостей** - подход когда фреймворк или иная структура берет на себя
управление
созданием объектов и управлением их зависимостями.

* Что такое **Dependency Injection**?

**Dependency Injection** (внедрение зависимости) - набор паттернов и принципов разработки программного обеспечения,
которые позволяют писать слабо связанный код. DI является формой IoC.

* Какие есть IoC-контейнеры в Spring?

**BeanFactory** - создает бины и инициализирует их по запросу

**ApplicationContext** создает и инициализирует бины сразу как только создается.

* Что такое **Spring Bean**?

**Spring Bean** - объекты, жизненным циклом которых управляет IoC-контейнер Spring.

* Опишите жизненный цикл бина (не обязательно всё, главное база)

1. Конструктор
2. Сеттеры
3. BeanNameAware.setBeanName
4. BeanClassLoaderAware.setBeanClassLoader
5. BeanFactoryAware.setBeanFactory
6. BeanPostProcessor.postProcessBeforeInitialization
7. @PostConstruct
8. InitializingBean.afterPropertiesSet
9. init-метод
10. BeanPostProcessor.postProcessAfterInitialization

Бин готов к использованию

11. @PreDestroy
12. DisposableBean.destroy
13. destroy-метод
14. finalize

* Какие есть области видимости/применения (скоупы) бинов?

1. Singleton - IoC-контейнер создает один экземпляр бина в контекст. Все места, где необходим бин этого типа получат
   один и тот же объект
2. Prototype - IoC-контейнер создает экземпляры бина по необходимости. Во все места, где необходим бин этого типа
   получат
   уникальный объект
3. Request - на каждый HTTP запрос создается уникальный экземпляр бина. Для web окружения
4. Session - на каждую HTTP сессию создается уникальный экземпляр бина. Для web окружения
5. Global Session - на каждую HTTP сессию создается уникальный экземпляр бина. Применяется для portlet web приложений.
   Встречается до Spring 5, в Spring 5 уже такого скоупа нет.
6. Application - создает один экземпляр бина на каждый **ServletContext**. Для web окружения
7. WebSocket - создает один экземпляр бина для каждого WebSocket подключения. Для web окружения
8. Custom Scopes - имеется возможность создать собственную область видимости бина

* Потокобезопасны ли бины скоупа Singleton?

Нет, потокобезопасность необходимо обеспечивать разработчику

* Для чего используется аннотация **@Qualifier**?

**@Qualifier** используется для определения какой бин должен быть использован, в случае если в контексте есть несколько
бинов такого типа.

* Для чего используется аннотация **@Primary**?

**@Primary** используется для определения какой бин должен использоваться, в случае если в контексте есть несколько
бинов
такого типа и нет указания какой конкретно бин использовать аннотацией **@Qualifier**.

* Для чего используется аннотация **@Conditional**?

Аннотация @Conditional указывает, что компонент создается только тогда, когда все условия соответствуют.
Условия определяются в классах, которые должны имплементировать интерфейс **Condition** с методом
**_boolean matches(ConditionContext, AnnotatedTypeMetadata)_**.
Для классов с аннотацией **Configuration** лучше применять **@ConfigurationCondition**.

Готовые аннотации **@Conditional**:

1. ConditionalOnBean Условие выполняется, в случае если присутствует нужный бин в BeanFactory.
2. ConditionalOnClass Условие выполняется, если нужный класс есть в classpath.
3. ConditionalOnCloudPlatform Условие выполняется, когда активна определенная платформа.
4. ConditionalOnExpression Условие выполняется, когда SpEL выражение вернуло положительное значение.
5. ConditionalOnJava Условие выполняется, когда приложение запущено с определенной версией JVM.
6. ConditionalOnJndi Условие выполняется, только если через JNDI доступен определенный ресурс.
7. ConditionalOnMissingBean Условие выполняется, в случае если нужный бин отсутствует в контейнере.
8. ConditionalOnMissingClass Условие выполняется, если нужный класс отсутствует в classpath.
9. ConditionalOnNotWebApplication Условие выполняется, если контекст приложения не является веб контекстом.
10. ConditionalOnProperty Условие выполняется, если в файле настроек заданы нужные параметры.
11. ConditionalOnResource Условие выполняется, если присутствует нужный ресурс в classpath.
12. ConditionalOnSingleCandidate Условие выполняется, если bean-компонент указанного класса уже содержится в контейнере
    и он единственный.
13. ConditionalOnWebApplication Условие выполняется, если контекст приложения является веб контекстом.


* Чем различаются **@Component**, **@Service**, **@Repository**?

1. **@Component** - Spring определяет этот класс как кандидата для создания bean.
2. **@Service** - класс содержит бизнес-логику и вызывает методы на уровне хранилища. Ничем не отличается от классов
   с **@Component.**
3. **@Repository** - указывает, что класс выполняет роль хранилища (объект доступа к DAO). При этом отлавливает
   определенные исключения персистентности и пробрасывает их как одно непроверенное исключение Spring Framework. Для
   этого
   Spring оборачивает эти классы в прокси, и в контекст должен быть добавлен класс **
   PersistenceExceptionTranslationPostProcessor**

* Что такое Аспектно-ориентированное программирование?

Аспектно-ориентированное программирование (АОП) — парадигма программирования, основанная на идее разделения
функциональности для улучшения разбиения программы на модули.

* Как реализовано аспектирование в Spring? Вопрос именно про механизмы

Аспектирование реализовано через JDK Proxy и CGLib.

JDK Proxy может аспектировать только классы, у которых есть интерфейсы, и только методы определенные в интерфейсах,
в то время как cglib аспектирует все кроме final методов и классов т.к. генерирует прокси-класс.

* Для чего используется SpEL?

SpEL — это язык выражений, созданный для Spring Framework, который поддерживает запросы и управление графом объектов во
время выполнения. Так же его можно отдельно подключить в любой проект на Java.

* Что такое Spring Boot?

Spring Boot это набор классов конфигурации, которые создают нужные бины в контексте. Всю конфигурацию можно создать
руками, но Spring Boot это автоматизирует. При этом решая проблему конфликтов разных версий компонентов.

Spring Boot неявно упаковывает необходимые сторонние зависимости для Spring проекта и предоставляет их разработчику в
виде starter-пакетов (spring-boot-starter-web, spring-boot-starter-data-jpa и т.д.). Starter-пакеты представляют собой
набор зависимостей и конфигураций, которые можно включить в свое приложение.
